---
layout: post
title:  "GMS结果分析"
date:   2016-08-129 19:31:01 +0800
categories: GMS
tag: CTS/GTS
---

 
# CTS测试结果分析与处理总结

	CTS测试是兼容性测试，所以当出现fail时，说明系统的兼容性存在问题，这时我们就要找到出现问题的代码并修改使其通过测试。

	本文档主要分为四个部分，首先介绍CTS测试失败的常见原因，其次介绍几种常见的失败项处理方法，然后通过两个实例
	来简单介绍CTS的处理过程，最后简单介绍一下测试报告如何完成。
## 一、CTS失败常见原因总结

	CTS测试中失败的原因常见的大致分为以下几个方面：
+ 网络相关问题
+ 权限问题
+ 测试方法的问题
+ 设置问题
+ 命名规则问题
+ 驱动相关的问题
+ 签名问题
+ Google issue

### 1、	网络相关问题

 ({{ '/styles/images/gms/network.jpg' | prepend: site.baseurl }})

	这类问题大多是因为超时（TIMEOUT）；有的需要ipv6的网络环境；还有一些测试项是流媒体测试，公司网络环境达不到下载速率要求。
	
	解决办法是： 

+ a)	把dns server 配为 8.8.8.8 和 8.8.4.4， 避免运营商的劫持

+ b)	流媒体测试由于连接到国外，经常测试timeout,需要设置VPN，找一个网络情况好的时段，多测试几次（默认流媒体相关问题，
	不做处理，交给客户来测试）。

### 2、	权限和安全问题

 
	这类问题大多是因为某个应用的权限设置不符合google的规则，或是Selinux配置的问题。
	
	解决办法是： 
	根据log找到出现问题地方，按照google的规则重新配置权限或者se的规则。

### 3、	测试方法的问题
 

	此类问题多出现在相机测试上面，因为需要测试拍照、对焦、闪光灯等功能，测试过程中，如果手机置于黑暗或者狭小的空间中，
	可能会出现这些失败项。
	
	解决办法是：
	测试过程中手动测试。

### 4、	设置问题
 
 
	此类问题由于未按照要求配置导致测失败，其中第一个是由于没有设置google的默认dns导致的，第二是由于sim卡设置中
	为选择发送短信的选项导致的。
	解决办法是：
	按照要求来设置手机。

### 5、	命名规则问题
 

	此类问题是因为未按照要求命名导致的测试失败，对于testBuildFingerprint这个问题我们后面会详细解释。

### 6、	驱动相关的问题
 
	此类问题需要驱动同事帮忙解决，本例中使用不在Sensor Available List 中的YUV sensor 时，sensor 的feature table中
	preview size提供的不全导致测试失败。另外比如在不支持自动对焦的项目中打开自动对焦的feature也会导致失败。
### 7、	签名问题
 

	该项是测试应用包是否使用google默认的签名文件。使用默认的签名编译code。
	具体修改方法可参照FAQ




### 8、	Google issue
 
	此类问题分为三种：
	1.有link的Google issue ，不需要再来申请分析报告，用link申请waive.
	2.已得到Google回复的： You can get a waiver .
	3.已提交google等待google 回复的： Waiting for google feedback.
 
	所有Waiting for Google feedback的Google issue, 均需要客户与Google 确认是否可以waive, MTK 亦在努力与Google 沟通中，
	一旦拿到Google waiver, 会修改成:You can get a waiver



